"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const index_js_1 = require("./index.js");
const path = require("path");
const fs = require("fs");
const getopts = require("getopts");
let opt = getopts(process.argv.slice(2), {});
let input = fs.readFileSync(path.join(__dirname, '../bnf.bnf'), 'utf8');
let res = index_js_1.BNF.parse(input);
if (res instanceof index_js_1.SyntaxNode) {
    let syntax = (0, index_js_1.Compile)(res);
    syntax.setVerbose(opt.verbose);
    fs.writeFileSync(path.join(__dirname, '../bnf.json'), JSON.stringify(syntax.serialize()));
}
else {
    console.error(res.toString());
    process.exit(1);
}
